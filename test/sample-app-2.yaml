apiVersion: v1
kind: Pod
metadata:
  name: log-test
  namespace: default
  labels:
    app: log-test
spec:
  containers:
    - name: app
      image: busybox
      command: ["sh", "-c"]
      args:
        - |
          i=0;
          while true; do
            i=$((i+1));
            echo "ts=$(date -Iseconds) level=INFO app=log-test msg=\"hello $i\"";
            if [ $((i % 10)) -eq 0 ]; then
              echo "ts=$(date -Iseconds) level=ERROR app=log-test msg=\"boom $i\"";
            fi
            sleep 2;
          done
